<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crystal Math</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; min-height:100%; overflow:auto; background:#000; font-family:sans-serif; }
    #canvas-container { position:fixed; top:0; left:0; width:100%; height:100%; }
    .content { position:relative; z-index:1; text-align:center; max-width:960px; width:92%;
      background:rgba(0,0,0,0.4);
      padding:1.3rem 1.5rem; border-radius:.5rem; border:1px solid rgba(255,255,255,0.05);
      margin:1.5rem auto 2rem;
    }
    .title { margin:1.5rem 0; font-size:2rem; letter-spacing:1.5rem;
      background:linear-gradient(90deg,hsl(200,100%,50%),hsl(280,100%,50%),hsl(220,100%,45%));
      -webkit-background-clip:text; color:transparent;
    }
    .intro, .intro2 { margin:0.12rem 0; white-space:pre-line; font-size:.6rem;
      letter-spacing:.05em; font-weight:300; line-height:1.55;
    }
    .intro { color:#ba5cbf; }
    .intro2 { color:#5a9ba4; }
    .main-info { margin-top:1.2rem; text-align:center; color:#d7e8ff; font-size:.98rem; display:flex; flex-direction:column; gap:.9rem; align-items:center; }
    .info-block { background:rgba(5,15,35,0.65); border:1px solid rgba(120,200,255,0.2);
      border-radius:.9rem; padding:1.35rem 1.6rem; box-shadow:0 0 25px rgba(60,0,120,0.25);
      max-width:820px; width:100%;
    }
    .info-title { color:#7dd1ff; font-size:1.02rem; letter-spacing:.1em; text-transform:uppercase;
      margin-bottom:.8rem; text-align:center;
    }
    .info-list { list-style:none; display:grid; gap:.8rem; font-size:.98rem; justify-items:center; }
    .info-list li { position:relative; padding-left:0; line-height:1.6; text-align:center; max-width:720px; }
    .info-list li::before { content:"‚ú¶"; display:inline-block; margin-right:.55rem; color:#92e5ff;
      text-shadow:0 0 8px rgba(90,190,255,0.9);
    }
    .price-line { color:#cfc7ff; font-size:1rem; }
    .price-line strong { color:#88f5ff; }
    .price-value { color:#fff; font-weight:600; text-shadow:0 0 10px rgba(120,210,255,0.7); display:inline-block; }
    .price-value.flash-up { animation:priceFlashUp 0.75s ease-out; }
    .price-value.flash-down { animation:priceFlashDown 0.75s ease-out; }
    .price-value.flash-flat { animation:priceFlashFlat 0.75s ease-out; }
    @keyframes priceFlashUp {
      0% { color:#1df59a; text-shadow:0 0 18px rgba(29,245,154,0.85); }
      100% { color:#fff; text-shadow:0 0 10px rgba(120,210,255,0.7); }
    }
    @keyframes priceFlashDown {
      0% { color:#ff5f6d; text-shadow:0 0 18px rgba(255,95,109,0.85); }
      100% { color:#fff; text-shadow:0 0 10px rgba(120,210,255,0.7); }
    }
    @keyframes priceFlashFlat {
      0% { color:#4fa3ff; text-shadow:0 0 18px rgba(79,163,255,0.85); }
      100% { color:#fff; text-shadow:0 0 10px rgba(120,210,255,0.7); }
    }
    .footers { margin-top:2rem; display:flex; flex-direction:column; align-items:center; gap:.75rem; }
    .footer-address { color:rgba(0,255,255,0.75); display:inline-flex; align-items:center; font-size:.85rem; }
    #copyBtn { margin-left:.5rem; background:none; border:none; font-size:1.2rem; color:inherit; cursor:pointer; }
    .footer-note { color:grey; margin-top:.2rem; font-size:.72rem; text-align:center; line-height:1.5; }
    .support-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:.85rem; width:100%; max-width:820px; }
    .card-lite { background:transparent; border:none; border-radius:0; padding:0; box-shadow:none; text-align:center; }
    .card-lite h3 { color:#89d9ff; font-size:.93rem; letter-spacing:.08em; margin-bottom:.45rem; text-transform:uppercase; }
    .flowchart-inline { cursor:pointer; text-decoration:underline; text-underline-offset:4px; color:#cfe7ff; background:none; border:none; padding:0; font-size:.92rem; }
    .flowchart-inline.disabled { cursor:not-allowed; opacity:0.6; }
    .flowchart-status { display:block; margin-top:.35rem; color:#8db7ff; font-size:.9rem; }
    .video-shell { display:flex; flex-direction:column; gap:.35rem; align-items:center; }
    .video-shell .video-frame { width:100%; max-width:520px; aspect-ratio:16/9; border:none; border-radius:.35rem; box-shadow:0 0 18px rgba(50,120,200,0.25);
      background:rgba(10,20,40,0.45); overflow:hidden; }
    .qr-block { margin:0.6rem auto 0; display:flex; flex-direction:column; align-items:center; gap:.45rem; }
    .qr-block img { width:220px; height:220px; object-fit:contain; filter:drop-shadow(0 0 20px rgba(120,200,255,0.28)); }
    .qr-note { color:#555555; font-size:.82rem; text-align:center; letter-spacing:.04em; }
    .pdai-note { margin:1rem auto 0; max-width:780px; color:#a5c9ff; text-align:center; line-height:1.5; font-size:.95rem; }
    @media(max-width:768px){.title{font-size:1.6rem;letter-spacing:1rem;}}@media(max-width:480px){.title{font-size:1.4rem;letter-spacing:.5rem;}}
  </style>
</head>
<body>
  <div id="canvas-container"></div>
  <div class="content">
    <h1 class="title">CRYSTAL <span class="break">MATH</span></h1>
    <p class="intro">·¥° ú…™·¥õ·¥á  ú·¥Ä·¥õ  ú·¥Ä·¥Ñ·¥ã·¥á Äs  ú·¥Ä·¥†·¥á  ü·¥è…¥…¢ ·¥Ñ·¥è-·¥è·¥ò·¥õ·¥á·¥Ö ·¥õ ú·¥á ·¥Ñ·¥è·¥Ö·¥ás ·¥è“ì ·¥ò·¥è·¥°·¥á Ä.
·¥õ…™·¥ç·¥á ·¥Ä…¥·¥Ö ·¥Ä…¢·¥Ä…™…¥, ·¥õ ú·¥á è‚Äô·¥†·¥á ·¥áx·¥ò·¥ès·¥á·¥Ö ·¥Ñ Ä·¥Ä·¥Ñ·¥ãs …™…¥ ·¥õ ú·¥á ·¥Ñ·¥á…¥·¥õ Ä·¥Ä ü…™·¥¢·¥á·¥Ö “ì·¥è Ä·¥õ Ä·¥áss, ·¥Ö…™s·¥ç·¥Ä…¥·¥õ ü…™…¥…¢ …™·¥õ  ô Ä…™·¥Ñ·¥ã  ô è  ô Ä…™·¥Ñ·¥ã.
·¥õ ú Ä·¥è·¥ú…¢ ú ·¥èÃ®·¥ú…™·¥á·¥õ s·¥Ä ô·¥è·¥õ·¥Ä…¢·¥á ·¥Ä…¥·¥Ö ·¥Ñ Ä è·¥ò·¥õ…™·¥Ñ …™…¥…¥·¥è·¥†·¥Ä·¥õ…™·¥è…¥ ·¥õ ú·¥á è …¥·¥è·¥° ·¥õ ú Ä·¥á·¥Ä·¥õ·¥á…¥ ·¥õ ú·¥á ·¥†·¥á Ä è “ì·¥è·¥ú…¥·¥Ö·¥Ä·¥õ…™·¥è…¥ ·¥è“ì ·¥õ Ä·¥Ä·¥Ö-“ì…™,
·¥Ñ ü·¥á·¥Ä Ä…™…¥…¢ ·¥õ ú·¥á ·¥°·¥Ä è “ì·¥è Ä ·¥õ ú·¥á  Ä…™s·¥á ·¥è“ì ·¥õ ú·¥á ·¥Ö·¥á·¥Ñ·¥á…¥·¥õ Ä·¥Ä ü…™·¥¢·¥á·¥Ö  Ä·¥á·¥Ä ü·¥ç.</p>
    <div class="main-info">
  <div class="info-block">
    <div class="info-title">crystals can be found and redeemed for crypto</div>
    <div class="modrinth-links-container" style="font-size:0.7rem; text-align:center; margin-bottom:0.5rem; display:flex; flex-wrap:wrap; justify-content:center; gap:0.5rem;">
  <a href="https://maven.fabricmc.net/net/fabricmc/fabric-installer/1.1.1/fabric-installer-1.1.1.exe" target="_blank" style="color:#88f5ff; text-decoration:underline;">Fabric Installer</a>
  <span>|</span>
  <a href="https://cdn.modrinth.com/data/1bZhdhsH/versions/v5irHzkg/plasmovoice-fabric-1.21.6-2.1.8.jar" target="_blank" style="color:#88f5ff; text-decoration:underline;">PlasmoVoice</a>
  <span>|</span>
  <a href="https://cdn.modrinth.com/data/DyTvM1dv/versions/XEH1qWNo/AmbientEnvironment-fabric-1.21.8-25.0.0.1.jar" target="_blank" style="color:#88f5ff; text-decoration:underline;">Ambient Environment</a>
  <span>|</span>
  <a href="https://cdn.modrinth.com/data/OsZiaDHq/versions/mj0ahfMl/CreativeCore_FABRIC_v2.14.7_mc1.21.8.jar" target="_blank" style="color:#88f5ff; text-decoration:underline;">Creative Core</a>
  <span>|</span>
  <a href="https://cdn.modrinth.com/data/uCdwusMi/versions/PWWYVdOA/DistantHorizons-2.4.5-b-1.21.8-fabric-neoforge.jar" target="_blank" style="color:#88f5ff; text-decoration:underline;">Distant Horizons</a>
</div>
    <ul class="info-list">
      <li>Use <strong>2 crystals</strong> to craft the beacon recipe and secure a <strong>64√ó64</strong> claim for your build.</li>
      <li class="price-line">Testnet live until feb15 @ 74.208.174.190 ‚õèÔ∏èüíé<span id="crystal-price" class="price-value">$0.0146</span> (<strong>9√ópDAI</strong>:<span id="pdai-price" class="price-value">$0.001618</span>)</li>
    </ul>
  </div>
  <div class="support-grid">
    <div class="card-lite video-shell">
      <div id="info-video" class="video-frame"></div>
    </div>
  </div>
</div>
    <div class="pdai-note">pDAI is a speculative future stablecoin rumoured to peg to 1$ <span id="pdai-potential" style="display:block; margin-top:.35rem;">(potential 617.67x from here)</span></div>
    <p class="intro2" style="margin:1.2rem 0 0rem; font-size:1rem;">
      <a id="deeper-link" href="#" style="color:inherit; text-decoration:underline dotted;">·¥è…¥ ü è ·¥è…¥·¥á ·¥°…™ ü ü…™…¥…¢ ·¥õ·¥è ·¥á·¥ç ô Ä·¥Ä·¥Ñ·¥á ·¥ú…¥·¥Ñ·¥á Ä·¥õ·¥Ä…™…¥·¥õ è ·¥ç·¥Ä è ·¥ú…¥·¥Ñ·¥è·¥†·¥á Ä ·¥õ ú·¥á ·¥Ö·¥á·¥á·¥ò·¥á Ä  ü·¥Ä è·¥á Äs ·¥è“ì ·¥õ ú·¥á ·¥°·¥è Ä·¥ã</a>
    </p>
    <div class="footers">
      <div class="footer-address">0x6b175474e89094c44da98b954eedeac495271d0f<button id="copyBtn">‚éò</button></div>
    </div>
    <div class="qr-block">
      <img id="qr-image" alt="QR code for wallet" loading="lazy">
      <div class="qr-note">ùëµ √ò ‚≤¶ ”á ·ìø ‚Ç¶ ‚Ç≤&nbsp;&nbsp;¬°Ôπ© $ Œî ‚Ç° ¬Æ Œ£ ƒê</div>
    </div>
    </div>

    <div id="flowchart-modal" style="position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.9); z-index:5; opacity:0; pointer-events:none; transition:opacity 0.25s ease;">
      <button id="flowchart-close" style="position:absolute; top:2rem; right:2rem; background:none; border:none; color:#e6f7ff; font-size:2rem; cursor:pointer;">√ó</button>
      <img id="flowchart-img" src="" alt="Gameplay and economy flowchart" style="max-width:92%; max-height:92%; border-radius:.65rem; box-shadow:0 0 35px rgba(0,0,0,0.7); border:1px solid rgba(255,255,255,0.15); display:none;">
      <div id="flowchart-missing" style="color:#cfe7ff; text-align:center; line-height:1.6; max-width:520px; display:none;">Flowchart image not found. Place <code>canvas_minecraft-economy-flowchart-251030_0147.png</code> next to <code>index.html</code> and click again to view it.</div>
    </div>

    <div id="image-modal" style="position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.88); z-index:5; opacity:0; pointer-events:none; transition:opacity 0.25s ease;">
      <button id="close-modal" style="position:absolute; top:2rem; right:2rem; background:none; border:none; color:#e6f7ff; font-size:2rem; cursor:pointer;">√ó</button>
      <img src="unit.jpg" alt="PulseChain crew" style="max-width:90%; max-height:90%; border-radius:.75rem; box-shadow:0 0 35px rgba(0,0,0,0.65); border:1px solid rgba(255,255,255,0.12);">
    </div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="https://pixijs.download/v6.5.8/pixi.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pixi-filters@4.2.0/dist/pixi-filters.js"></script>
  <script>
    const app = new PIXI.Application({ autoDensity:true, antialias:true,
      backgroundAlpha:0, width:window.innerWidth, height:window.innerHeight,
      resolution:window.devicePixelRatio||1
    });
    document.getElementById('canvas-container').appendChild(app.view);
    app.ticker.maxFPS = 120;
    const CELL=150; let cols=0, rows=0; const grid=[], nodes=[];
    const tmpG=new PIXI.Graphics(); tmpG.beginFill(0xffffff); tmpG.drawCircle(0,0,1.5); tmpG.endFill();
    const nodeTex=app.renderer.generateTexture(tmpG);
    const COLORS=[0xaa00ff,0x00aaff,0x004de6];
    const lines=new PIXI.Graphics(); lines.blendMode=PIXI.BLEND_MODES.ADD; app.stage.addChild(lines);
    let mouse=null;
    window.addEventListener('mousemove', e=>mouse={x:e.clientX,y:e.clientY});
    window.addEventListener('mouseleave', ()=>mouse=null);
    function init(){cols=Math.ceil(app.screen.width/CELL);
      rows=Math.ceil(app.screen.height/CELL);
      grid.length=cols*rows;
      for(let i=0;i<grid.length;i++)grid[i]=[];
      nodes.length=0;
      app.stage.removeChildren().forEach(c=>{});
      app.stage.addChild(lines);
      const count=Math.floor((app.screen.width*app.screen.height)/15000*1.56);
      for(let i=0;i<count;i++){const n=new PIXI.Sprite(nodeTex);
        n.tint=COLORS[i%COLORS.length]; n.anchor.set(0.5);
        n.x=Math.random()*app.screen.width; n.y=Math.random()*app.screen.height;
        n.vx=(Math.random()-0.5)*0.51; n.vy=(Math.random()-0.5)*0.51;
        n.ix=n.iy=0; app.stage.addChild(n); nodes.push(n);
      }}
    app.ticker.add(()=>{
      lines.clear(); for(let i=0;i<grid.length;i++)grid[i].length=0;
      const sw=app.screen.width;
      for(const n of nodes){
        const idx=Math.floor(n.y/CELL)*cols+Math.floor(n.x/CELL);
        if(grid[idx])grid[idx].push(n);
      }
      for(const a of nodes){
        const col=Math.floor(a.x/CELL), row=Math.floor(a.y/CELL);
        for(let dy=-1;dy<=1;dy++)for(let dx=-1;dx<=1;dx++){
          const c=col+dx,r=row+dy;
          if(c<0||c>=cols||r<0||r>=rows)continue;
          for(const b of grid[r*cols+c]){
            if(a===b)continue;
            const dx_=a.x-b.x,dy_=a.y-b.y,dist=Math.hypot(dx_,dy_);
            if(dist<CELL){lines.lineStyle(1.2,a.tint,((CELL-dist)/CELL)*0.4);
              lines.moveTo(a.x,a.y).lineTo(b.x,b.y);}}
        }}
      for(const n of nodes){
        n.x+=n.vx+n.ix; n.y+=n.vy+n.iy; n.ix*=0.6; n.iy*=0.6;
        if(mouse){const dx_=n.x-mouse.x,dy_=n.y-mouse.y,dist=Math.hypot(dx_,dy_);
          if(dist<CELL){const f=(CELL-dist)/CELL;n.ix+=(dx_/dist)*5*f; n.iy+=(dy_/dist)*5*f;}}
        if(n.x<0||n.x>sw)n.vx*=-1;
        if(n.y<0||n.y>app.screen.height)n.vy*=-1;
      }
      app.renderer.render(app.stage);
    });
    window.addEventListener('resize',()=>{app.renderer.resize(window.innerWidth,window.innerHeight);init();}); init();
    const priceEl=document.getElementById('pdai-price');
    const crystalPriceEl=document.getElementById('crystal-price');
    const potentialEl=document.getElementById('pdai-potential');
    const formatUsd=val=>`$${Number(val).toLocaleString(undefined,{minimumFractionDigits:4,maximumFractionDigits:4})}`;
    const formatPdai=val=>`$${Number(val).toLocaleString(undefined,{minimumFractionDigits:6,maximumFractionDigits:6})}`;
    const formatPotential=val=>`(potential ${Number(val).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}x from here)`;
    const FALLBACK_PDAI=0.0016183;
    const FALLBACK_CRYSTAL=0.0145647;
    const FALLBACK_POTENTIAL_VALUE=617.67;
    let lastPdaiPrice=null;
    let lastCrystalPrice=null;
    const applyFlash=(el,type)=>{
      if(!el) return;
      el.classList.remove('flash-up','flash-down','flash-flat');
      void el.offsetWidth;
      const cls=type==='up'?'flash-up':type==='down'?'flash-down':'flash-flat';
      el.classList.add(cls);
    };
    function renderPrices(pdaiPrice){
      const validPrice=Number.isFinite(pdaiPrice)&&pdaiPrice>0?pdaiPrice:null;
      const pdaiValue=validPrice!==null?validPrice:FALLBACK_PDAI;
      const crystalValue=validPrice!==null?validPrice*9:FALLBACK_CRYSTAL;
      const potentialValue=validPrice!==null?(1/validPrice):FALLBACK_POTENTIAL_VALUE;

      const pdaiChange=lastPdaiPrice===null?'flat':pdaiValue>lastPdaiPrice?'up':pdaiValue<lastPdaiPrice?'down':'flat';
      const crystalChange=lastCrystalPrice===null?'flat':crystalValue>lastCrystalPrice?'up':crystalValue<lastCrystalPrice?'down':'flat';

      priceEl.textContent=formatPdai(pdaiValue);
      crystalPriceEl.textContent=formatUsd(crystalValue);
      potentialEl.textContent=formatPotential(potentialValue);

      applyFlash(priceEl,pdaiChange);
      applyFlash(crystalPriceEl,crystalChange);

      lastPdaiPrice=pdaiValue;
      lastCrystalPrice=crystalValue;
    }

    async function updatePrices(){
      try{
        const res=await fetch('https://api.dexscreener.com/latest/dex/pairs/pulsechain/0xfc64556faa683e6087f425819c7ca3c558e13ac1');
        const data=await res.json();
        const price=parseFloat(data?.pairs?.[0]?.priceUsd);
        if(!Number.isFinite(price)||price<=0) throw new Error('Invalid price data');
        renderPrices(price);
      }catch(err){
        console.error('Price fetch failed',err);
        renderPrices(null);
      }
    }
    renderPrices(null);
    updatePrices();
    setInterval(updatePrices,1000);
    document.getElementById('copyBtn').addEventListener('click',()=>navigator.clipboard.writeText('0xA41B5174C803B2F779f4C83d482478b94A240fE6'));

    const qrImage=document.getElementById('qr-image');
    const QR_IMG_SRC = [
      'data:image/png;base64,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'
    ].join('');
    qrImage.src=QR_IMG_SRC;

    let ytPlayer=null;
    const YT_VIDEO_ID='cV4U7wtXDmU';

    const keepPlaying=()=>{
      if(!ytPlayer) return;
      const state=ytPlayer.getPlayerState();
      if(state!==YT.PlayerState.PLAYING && state!==YT.PlayerState.BUFFERING){
        try{ ytPlayer.playVideo(); }catch(err){ console.warn('Autoplay retry blocked',err); }
      }
    };

    function onYouTubeIframeAPIReady(){
      ytPlayer=new YT.Player('info-video',{
        videoId:YT_VIDEO_ID,
        playerVars:{
          autoplay:1,
          controls:1,
          rel:0,
          modestbranding:1,
          playsinline:1,
          mute:1
        },
        events:{
          onReady:()=>{
            const iframe=ytPlayer.getIframe?.();
            if(iframe){
              iframe.setAttribute('allow','autoplay; encrypted-media');
            }
            ytPlayer.playVideo();
            let tries=0;
            const retryInterval=setInterval(()=>{
              keepPlaying();
              tries++;
              if(tries>=6){
                clearInterval(retryInterval);
              }
            },1200);
          },
          onStateChange:(event)=>{
            if(event.data===YT.PlayerState.ENDED){
              try{ ytPlayer.seekTo(0); ytPlayer.playVideo(); }catch(err){ console.warn('Loop restart blocked',err); }
            }
          }
        }
      });
    }
    window.onYouTubeIframeAPIReady=onYouTubeIframeAPIReady;

    const modal=document.getElementById('image-modal');
    const openModal=document.getElementById('deeper-link');
    const closeModal=document.getElementById('close-modal');

    const showModal=()=>{
      modal.style.opacity='1';
      modal.style.pointerEvents='auto';
    };
    const hideModal=()=>{
      modal.style.opacity='0';
      modal.style.pointerEvents='none';
    };

    openModal.addEventListener('click',e=>{
      e.preventDefault();
      showModal();
    });
    closeModal.addEventListener('click',hideModal);
    modal.addEventListener('click',e=>{ if(e.target===modal) hideModal(); });

    const FLOWCHART_PATH='canvas_minecraft-economy-flowchart-251030_0147.png';
    const flowchartTrigger=document.getElementById('flowchart-trigger');
    const flowchartStatus=document.getElementById('flowchart-status');
    const flowchartModal=document.getElementById('flowchart-modal');
    const flowchartClose=document.getElementById('flowchart-close');
    const flowchartImg=document.getElementById('flowchart-img');
    const flowchartMissing=document.getElementById('flowchart-missing');
    let flowchartAvailable=false;

    const showFlowchartModal=(showMissing=false)=>{
      flowchartModal.style.opacity='1';
      flowchartModal.style.pointerEvents='auto';
      if(showMissing){
        flowchartMissing.style.display='block';
        flowchartImg.style.display='none';
      } else {
        flowchartMissing.style.display='none';
        flowchartImg.style.display='block';
      }
    };

    const hideFlowchartModal=()=>{
      flowchartModal.style.opacity='0';
      flowchartModal.style.pointerEvents='none';
    };

    flowchartTrigger?.addEventListener('click',()=>{
      if(flowchartAvailable){
        showFlowchartModal(false);
      } else {
        if(flowchartStatus) flowchartStatus.textContent='Flowchart image not found. Place the PNG next to index.html to enable the preview.';
        flowchartTrigger.classList.add('disabled');
        showFlowchartModal(true);
      }
    });
    flowchartClose?.addEventListener('click',hideFlowchartModal);
    flowchartModal?.addEventListener('click',e=>{ if(e.target===flowchartModal) hideFlowchartModal(); });

    async function checkFlowchartAvailability(){
      try{
        const res=await fetch(FLOWCHART_PATH,{method:'HEAD'});
        if(!res.ok) throw new Error('missing');
        flowchartAvailable=true;
        if(flowchartImg) flowchartImg.src=FLOWCHART_PATH;
        if(flowchartStatus) flowchartStatus.textContent='';
        flowchartTrigger?.classList.remove('disabled');
      }catch(err){
        flowchartAvailable=false;
        flowchartTrigger?.classList.add('disabled');
        if(flowchartStatus) flowchartStatus.textContent='Flowchart image not found. Place the PNG next to index.html to enable the preview.';
      }
    }
    checkFlowchartAvailability();

  </script>
</body>
</html>
